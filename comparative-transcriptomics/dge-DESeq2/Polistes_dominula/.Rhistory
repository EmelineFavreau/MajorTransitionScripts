dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
# temp = NULL
# new1 = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
###		temp = c(temp, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
new1
new2 <- subset(temp, disability_scale == dis.reg)$p.msss
new2
}
if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
new1 <- NA
new2 <- NA
}
cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
# temp = NULL
# new1 = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
temp <- subset(pmsss, years == yrs)
#  		  dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
#    	  dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
# 				if(is.na(dis.surv)) {
# 					dis.surv = dis.reg
# 				}
# 		 new1 <- subset(temp, disability_scale == dis.surv)$p.msss
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
temp
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
# temp = NULL
# new1 = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
temp <- subset(pmsss, years == yrs)
#  		  dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
#    	  dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
# 				if(is.na(dis.surv)) {
# 					dis.surv = dis.reg
# 				}
# 		 new1 <- subset(temp, disability_scale == dis.surv)$p.msss
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
yrs
temp
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
# new1 = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
#  		  dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
#    	  dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
# 				if(is.na(dis.surv)) {
# 					dis.surv = dis.reg
# 				}
# 		 new1 <- subset(temp, disability_scale == dis.surv)$p.msss
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
all.yrs
temp
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
# new1 = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
#  		  dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
#    	  dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
# 				if(is.na(dis.surv)) {
# 					dis.surv = dis.reg
# 				}
# 		 new1 <- subset(temp, disability_scale == dis.surv)$p.msss
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
all.yrs
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
all.disreg <- c(all.disreg, dis.reg)
#    	  dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
# 				if(is.na(dis.surv)) {
# 					dis.surv = dis.reg
# 				}
# 		 new1 <- subset(temp, disability_scale == dis.surv)$p.msss
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
all.disreg
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
all.disreg <- c(dis.surv, dis.reg)
# 				if(is.na(dis.surv)) {
# 					dis.surv = dis.reg
# 				}
# 		 new1 <- subset(temp, disability_scale == dis.surv)$p.msss
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
all.disreg
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
all.disreg <- c(all.disreg, dis.surv)
# 				if(is.na(dis.surv)) {
# 					dis.surv = dis.reg
# 				}
# 		 new1 <- subset(temp, disability_scale == dis.surv)$p.msss
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
all.disreg
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
all.disreg <- c(all.disreg, new1)
#  		 new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
all.disreg
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
new2 <- subset(temp, disability_scale == dis.reg)$p.msss
all.disreg <- c(all.disreg, new2)
}
#   	if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
# 	   	new1 <- NA
# 	 	  new2 <- NA
# 	  }
#  	cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
#  	cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
all.disreg
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
new1 <- NA
new2 <- NA
}
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:10) {
if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
new1 <- NA
new2 <- NA
}
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
View(cleaned.fatigue1)
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
new1 <- NA
new2 <- NA
}
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
# cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
# cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
View(cleaned.fatigue1)
## Now, let's merge/assign P-MSSS data to the survey data based on PDDSNumRegister (PDDS at time of survey) and years of symptoms
## First, we need to calculate the time that has elapsed since first symptoms and current survey date, so we will make a new column first for "date of first symptom" which is DOB + ageOfFirstSymptoms
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
## Now, we subtract the date of the headache survey from the yearOfFirstSymptoms (after stripping out just the year of the date of survey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
## If any of the data are negative, turn them into NA:
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
cleaned.fatigue1$PMSSS <- NULL
nrow(cleaned.fatigue1)
all.yrs = NULL
all.disreg = NULL
# new2 = NULL
for(r in 1:nrow(cleaned.fatigue1)) {
if(is.na(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
new1 <- NA
new2 <- NA
}
if(is.numeric(cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"])) {
yrs <- cleaned.fatigue1[r,"yearsOfSymptomsAtSurvey"]
all.yrs = c(all.yrs, yrs)
temp <- subset(pmsss, years == yrs)
dis.reg <- cleaned.fatigue1[r,"PDDSNumRegister"]
dis.surv <- cleaned.fatigue1[r,"PDDSNumSurvey"]
if(is.na(dis.surv)) {
dis.surv = dis.reg
}
new1 <- subset(temp, disability_scale == dis.surv)$p.msss
all.disreg = c(all.disreg, new1)
new2 <- subset(temp, disability_scale == dis.reg)$p.msss
}
# cleaned.fatigue1[r,"PMSSSatSurvey"] = new1
# cleaned.fatigue1[r,"PMSSSatRegister"] = new2
}
# all.yrs
all.disreg
view(cleaned.fatigue1)
View(cleaned.fatigue1)
cleaned.fatigue1$yearOfFirstSymptoms <- cleaned.fatigue1$ageOfFirstSymptoms + cleaned.fatigue1$dob_year
cleaned.fatigue1$yearsOfSymptomsAtSurvey <-as.numeric(format(as.Date(cleaned.fatigue1$date_at_survey),'%Y')) - cleaned.fatigue1$yearOfFirstSymptoms
cleaned.fatigue1$yearsOfSymptomsAtSurvey <- ifelse(cleaned.fatigue1$yearsOfSymptomsAtSurvey < 0, NA, cleaned.fatigue1$yearsOfSymptomsAtSurvey)
cleaned.fatigue1$yearsOfSymptomsAtSurvey
knitr::opts_chunk$set(echo = TRUE)
